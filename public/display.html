<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Display Page</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white flex flex-col items-center justify-center h-screen space-y-6 p-6">

  <h1 id="msg" class="text-4xl font-bold">–û–∂–∏–¥–∞—é –∫–æ–º–∞–Ω–¥‚Ä¶</h1>
  <audio id="audioPlayer" controls preload="auto" class="w-full max-w-md"></audio>
  <img id="screenShare" class="max-w-full max-h-full" alt="–°–∫—Ä–∏–Ω–∫–∞—Å—Ç" style="display:none;" />

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    const audio  = document.getElementById('audioPlayer');
    const img    = document.getElementById('screenShare');
    const msg    = document.getElementById('msg');

    // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–≤—Ç–æ–ø–ª–µ–π: –ø–µ—Ä–≤—ã–π –∫–ª–∏–∫
    document.body.addEventListener('click', () => audio.play().catch(() => {}), { once: true });

    // –§–æ–Ω
    socket.on('backgroundChanged', color => {
      document.body.style.backgroundColor = color;
      msg.textContent = `–§–æ–Ω: ${color}`;
    });

    // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ –ø–æ URL
    socket.on('playAudio', src => {
      audio.src = src;
      audio.load();
      audio.play().then(() => {
        msg.textContent = '–ò–≥—Ä–∞–µ—Ç –º—É–∑—ã–∫–∞ üéµ';
      }).catch(err => {
        console.warn('Autoplay failed:', err);
        msg.textContent = '–ù–∞–∂–º–∏—Ç–µ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫';
      });
    });

    // –°–∫—Ä–∏–Ω–∫–∞—Å—Ç (–∫–∞–¥—Ä –ø–æ –∫–∞–¥—Ä—É)
    socket.on('screenFrame', dataUrl => {
      img.style.display = 'block';
      img.src = dataUrl;
      msg.textContent = '–¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è‚Ä¶';
    });

    // –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ Google-–ø–æ–∏—Å–∫—É
    socket.on('googleSearch', query => {
      window.location.href = 'https://www.google.com/search?q=' + encodeURIComponent(query);
    });
  </script>
</body>
</html>
